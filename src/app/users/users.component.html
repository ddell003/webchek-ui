<div class="row">
  <div class="col lg-12">
    <h2>Users:
      <button mat-raised-button
              type="button"
              color="accent"
              style="float: right; background-color: #17a2b8;"
              (click)="addUser()">
        Create User</button>
    </h2>
  </div>
</div>
<div class="row" *ngIf="createUser" >
  <div class="col lg-12">
    <mat-card>
      <mat-card-header style="background-color: #17a2b8 !important;">
        <mat-card-title>New User</mat-card-title>
      </mat-card-header>
      <mat-card-content>
        <div class="row">
          <div class="col col-lg-4 col-md-6">
            <mat-form-field class="col col-lg-12">
              <input
                type="text"
                matInput
                [(ngModel)]="newUser.name"
                name="userName"
                required
                minlength=3
                #userName="ngModel"
                placeholder="Full Name"
              >
              <mat-error *ngIf="userName.invalid">Please enter a user name</mat-error>
            </mat-form-field>
          </div>

          <div class="col col-lg-4 col-md-6">
            <mat-form-field class="col col-lg-12">
              <input
                type="email"
                matInput
                [(ngModel)]="newUser.email"
                name="email"
                required
                minlength=3
                #email="ngModel"
                placeholder="Enter User email"
              >
              <mat-error *ngIf="email.invalid">Please enter valid email</mat-error>
            </mat-form-field>
          </div>

<!--          <div class="col col-lg-3 col-md-6">-->
<!--            <mat-form-field class="col col-lg-12">-->
<!--              <mat-label>CreatedAt</mat-label>-->
<!--              <input-->
<!--                matInput [matDatepicker]="picker"-->
<!--                required-->
<!--                name="created_at"-->
<!--                #created_at="ngModel"-->
<!--                [(ngModel)]="newUser.created_at"-->
<!--              >-->
<!--              <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>-->
<!--              <mat-datepicker #picker></mat-datepicker>-->
<!--              <mat-error *ngIf="created_at.invalid">Please select a date</mat-error>-->
<!--            </mat-form-field>-->
<!--          </div>-->

          <div class="col col-lg-3 col-md-6">
            <mat-form-field class="col col-lg-12">
              <mat-label>Owner</mat-label>
              <mat-select
                ngModel
                required
                name="owner"
                #owner="ngModel"
                [(ngModel)]="newUser.owner">
<!--                <mat-option value="yes">Yes</mat-option>-->
<!--                <mat-option value="no">No</mat-option>-->
                  <mat-option *ngFor="let owner of owners" [value]="owner.viewValue">
                  {{owner.viewValue}}
                </mat-option>
              </mat-select>
              <mat-error *ngIf="owner.invalid">Please select if it is an owner</mat-error>
            </mat-form-field>
          </div>

          <div class="col col-lg-4 col-md-6">
            <mat-form-field class="col col-lg-12">
              <input
                type="password"
                matInput
                [(ngModel)]="newUser.password"
                name="password"
                required
                minlength=3
                #password="ngModel"
                placeholder="Enter User password"
              >
              <mat-error *ngIf="password.invalid">Please enter valid password</mat-error>
            </mat-form-field>
          </div>

        </div>


        <br><br>
        <button mat-raised-button color="primary" type="button" (click)="uploadUser()">Submit</button>
        <button mat-raised-button color="warn" type="button" (click)="createUser = false" style="margin-left: 5px;">Cancel</button>

      </mat-card-content>
    </mat-card>
  </div>
  <hr>
</div>

<div class="row" *ngIf="users && users.length > 0">
  <div class="col lg-12">
    <table class="table table-striped table-hover">
      <thead>
      <tr>
        <th scope="col">Name</th>
        <th scope="col">Email</th>
        <th scope="col">CreatedAt</th>
        <th scope="col">Owner</th>
      </tr>
      </thead>
      <tbody>
      <tr *ngFor="let user of users; let i = index">
        <th scope="row" >{{user.name}}</th>
        <td>{{user.email}}</td>
        <td>{{user.created_at}}</td>
        <td>{{formatOwner(user.owner)}}</td>
      </tr>
      </tbody>
    </table>
  </div>
</div>
